/*!
 * vue-draggable-nested-tree v3.0.0-beta2
 * (c) phphe <phphe@outlook.com> (https://github.com/phphe)
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t=t||self).vueDraggableNestedTree={})}(this,(function(t){"use strict";function e(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function r(t,e){return t(e={exports:{}},e.exports),e.exports}var n=r((function(t){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},t.exports.default=t.exports,t.exports.__esModule=!0}));e(n);var o=r((function(t){function e(r){return t.exports=e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t.exports.default=t.exports,t.exports.__esModule=!0,e(r)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0}));e(o);var i=r((function(t){t.exports=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=o(t)););return t},t.exports.default=t.exports,t.exports.__esModule=!0}));e(i),e(r((function(t){function e(r,n,o){return"undefined"!=typeof Reflect&&Reflect.get?(t.exports=e=Reflect.get,t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=e=function(t,e,r){var n=i(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(r):o.value}},t.exports.default=t.exports,t.exports.__esModule=!0),e(r,n,o||r)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0})));var a=r((function(t){function e(r,n){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,e(r,n)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0}));e(a),e(r((function(t){t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0})));var l=r((function(t){function e(r){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?(t.exports=e=function(t){return typeof t},t.exports.default=t.exports,t.exports.__esModule=!0):(t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.default=t.exports,t.exports.__esModule=!0),e(r)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0})),s=e(l);e(r((function(t){var e=l.default;t.exports=function(t,r){return!r||"object"!==e(r)&&"function"!=typeof r?n(t):r},t.exports.default=t.exports,t.exports.__esModule=!0})));var d=r((function(t){t.exports=function(t){if(Array.isArray(t))return t},t.exports.default=t.exports,t.exports.__esModule=!0}));e(d);var c=r((function(t){t.exports=function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){l=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}},t.exports.default=t.exports,t.exports.__esModule=!0}));e(c);var u=r((function(t){t.exports=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n},t.exports.default=t.exports,t.exports.__esModule=!0}));e(u);var f=r((function(t){t.exports=function(t,e){if(t){if("string"==typeof t)return u(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(t,e):void 0}},t.exports.default=t.exports,t.exports.__esModule=!0}));e(f);var p=r((function(t){t.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0}));e(p),e(r((function(t){t.exports=function(t,e){return d(t)||c(t,e)||f(t,e)||p()},t.exports.default=t.exports,t.exports.__esModule=!0})));var h=e(r((function(t){t.exports=function(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t},t.exports.default=t.exports,t.exports.__esModule=!0}))),g=e(r((function(t){function e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t},t.exports.default=t.exports,t.exports.__esModule=!0}))),v=e(r((function(t){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0}))),y=(r((function(t){var e=function(t){var e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function s(t,e,r,n){var o=e&&e.prototype instanceof u?e:u,i=Object.create(o.prototype),a=new w(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return O()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var l=b(a,r);if(l){if(l===c)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=d(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===c)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}(t,r,a),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=s;var c={};function u(){}function f(){}function p(){}var h={};h[o]=function(){return this};var g=Object.getPrototypeOf,v=g&&g(g(E([])));v&&v!==e&&r.call(v,o)&&(h=v);var y=p.prototype=u.prototype=Object.create(h);function m(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var n;this._invoke=function(o,i){function a(){return new e((function(n,a){!function n(o,i,a,l){var s=d(t[o],t,i);if("throw"!==s.type){var c=s.arg,u=c.value;return u&&"object"==typeof u&&r.call(u,"__await")?e.resolve(u.__await).then((function(t){n("next",t,a,l)}),(function(t){n("throw",t,a,l)})):e.resolve(u).then((function(t){c.value=t,a(c)}),(function(t){return n("throw",t,a,l)}))}l(s.arg)}(o,i,n,a)}))}return n=n?n.then(a,a):a()}}function b(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=d(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function w(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function E(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return f.prototype=y.constructor=p,p.constructor=f,f.displayName=l(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,l(t,a,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(x.prototype),x.prototype[i]=function(){return this},t.AsyncIterator=x,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new x(s(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},m(y),l(y,a,"Generator"),y[o]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=E,w.prototype={constructor:w,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var l=r.call(i,"catchLoc"),s=r.call(i,"finallyLoc");if(l&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),N(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;N(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}})),r((function(t){t.exports=function(t){if(Array.isArray(t))return u(t)},t.exports.default=t.exports,t.exports.__esModule=!0})));e(y);var m=r((function(t){t.exports=function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)},t.exports.default=t.exports,t.exports.__esModule=!0}));e(m);var x=r((function(t){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},t.exports.default=t.exports,t.exports.__esModule=!0}));
/*!
	 * helper-js v1.4.38
	 * (c) phphe <phphe@outlook.com> (https://github.com/phphe)
	 * Homepage: undefined
	 * Released under the MIT License.
	 */
function b(t){return"[object Array]"===Object.prototype.toString.call(t)}function _(t,e){return 1===arguments.length&&(e=t,t=0),Math.floor(Math.random()*(e-t+1)+t)}function N(t,e){for(var r,n=0;(r=t.indexOf(e))>-1;)t.splice(r,1),n++;return n}function w(t){var e=O(t),r=function(){if("undefined"!=typeof pageYOffset)return{top:pageYOffset,left:pageXOffset};var t=document.body,e=document.documentElement;return{top:(e=e.clientHeight?e:t).scrollTop,left:e.scrollLeft}}();return{x:e.left+r.left,y:e.top+r.top}}function E(t){for(var e=function(t){var e=t.offsetParent;return(!e||e===document.body&&"static"===getComputedStyle(document.body).position)&&(e=document.body.parentElement),e}(t),r={x:t.offsetLeft,y:t.offsetTop},n=t;(n=n.parentElement)!==e&&n;)r.x-=n.scrollLeft,r.y-=n.scrollTop;return r}function O(t){var e=t.getBoundingClientRect(),r=e.top-document.documentElement.clientTop,n=e.bottom,o=e.left-document.documentElement.clientLeft,i=e.right;return{top:r,right:i,bottom:n,left:o,width:e.width||i-o,height:e.height||n-r,x:o,y:r}}function T(t,e){t["original_".concat(e)]=t.getAttribute(e)}function S(t,e){var r="original_".concat(e);t.setAttribute(e,t[r])}function P(t,e){return t.classList?t.classList.contains(e):new RegExp("(^| )"+e+"( |$)","gi").test(t.className)}function C(t,e){P(t,e)||(t.classList?t.classList.add(e):t.className+=" "+e)}function j(t){T(t,"style"),t.style.display="block";var e=O(t),r={width:e.width,height:e.height};return S(t,"style"),r}function k(t,e,r){for(var n=arguments.length,o=new Array(n>3?n-3:0),i=3;i<n;i++)o[i-3]=arguments[i];t.addEventListener?t.addEventListener.apply(t,[e,r].concat(o)):t.attachEvent&&t.attachEvent.apply(t,["on".concat(e),r].concat(o))}function L(t,e,r){for(var n=arguments.length,o=new Array(n>3?n-3:0),i=3;i<n;i++)o[i-3]=arguments[i];t.removeEventListener?t.removeEventListener.apply(t,[e,r].concat(o)):t.detachEvent&&t.detachEvent.apply(t,["on".concat(e),r].concat(o))}function M(t,e,r,n,o){var i,a,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1e3;null==r&&(r=0,n=t.length-1);for(var s,d=0;r>=0&&r<=n;){if(d>=l)throw Error("binarySearch: loop times is over ".concat(l,", you can increase the limit."));if((s=e(a=t[i=Math.floor((n-r)/2+r)],d))>0)n=i-1;else{if(!(s<0))return{index:i,value:a,count:d+1,hit:!0};r=i+1}d++}return o?{index:i,value:a,count:d+1,hit:!1,bigger:s>0}:null}function A(t){return(A="function"==typeof Symbol&&"symbol"===s(Symbol.iterator)?function(t){return s(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":s(t)})(t)}function D(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function I(t,e){var r=arguments.length>3?arguments[3]:void 0,n=b(t)?t:[t],o=n.map((function(t,e){return{item:t,index:e}}));r&&o.reverse();for(var i=function(){var t=o.shift(),n=t.item,i=t.index,a=t.parent,l=e(n,i,a);if(!1===l)return{v:void 0};if("skip children"===l)return"continue";if("skip siblings"===l&&(o=o.filter((function(t){return t.parent!==a}))),n.children){var s,d=n.children;r&&(d=d.slice()).reverse();var c=d.map((function(t,e){return{item:t,index:e,parent:n}}));(s=o).push.apply(s,D(c))}};o.length;){var a=i();switch(a){case"continue":continue;default:if("object"===A(a))return a.v}}}function R(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"parent";t[n]&&N(t[n][r],t),t[n]=e}function B(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"parent";if(t!==e){var o=e[n],i=o[r],a=i.indexOf(e);i[a+1]!==t&&(t[n]===e[n]?(N(i,t),a=i.indexOf(e)):R(t,e[n]),i.splice(a+1,0,t))}}function $(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children";if(t===e)throw"can't append to self";var n=e[r],o=n[n.length-1];o!==t&&(R(t,e),n.push(t))}e(x),e(r((function(t){t.exports=function(t){return y(t)||m(t)||f(t)||x()},t.exports.default=t.exports,t.exports.__esModule=!0})));function F(t,e,r,n,o,i,a,l,s,d){"boolean"!=typeof a&&(s=l,l=a,a=!1);var c,u="function"==typeof r?r.options:r;if(t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,o&&(u.functional=!0)),n&&(u._scopeId=n),i?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,s(t)),t&&t._registeredComponents&&t._registeredComponents.add(i)},u._ssrRegister=c):e&&(c=a?function(t){e.call(this,d(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,l(t))}),c)if(u.functional){var f=u.render;u.render=function(t,e){return c.call(e),f(t,e)}}else{var p=u.beforeCreate;u.beforeCreate=p?[].concat(p,c):[c]}return r}var H={name:"TreeNode",props:{data:{},store:{},level:{default:0}},data:function(){return{vm:this}},computed:{childrenLevel:function(){return this.level+1},isRoot:function(){return this.data&&this.data.isRoot},childrenVisible:function(){var t=this.data;return this.isRoot||t&&t.children&&t.children.length&&t.open},innerBackStyle:function(){var t={marginBottom:this.store.space+"px"};return!this.isRoot&&this.level>1&&(t.paddingLeft=(this.level-1)*this.store.indent+"px"),t}},watch:{data:{immediate:!0,handler:function(t){t&&(t._vm=this,t._treeNodePropertiesCompleted||t.isRoot||this.store.compeleteNode(t,this.$parent.data))}}}},G=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tree-node",class:[t.data.active?t.store.activatedClass:"",t.data.open?t.store.openedClass:"",t.data.class],style:t.data.style,attrs:{id:t.data._id}},[t.isRoot?t._e():t._t("node-inner-back",(function(){return[r("div",{staticClass:"tree-node-inner-back",class:[t.data.innerBackClass],style:[t.innerBackStyle,t.data.innerBackStyle]},[r("div",{staticClass:"tree-node-inner",class:[t.data.innerClass],style:[t.data.innerStyle]},[t._t("default",null,{data:t.data,store:t.store,vm:t.vm})],2)])]}),{styleObj:t.innerBackStyle,data:t.data,store:t.store,vm:t.vm}),r("transition",{attrs:{name:t.store.childrenTransitionName}},[t.childrenVisible?r("div",{staticClass:"tree-node-children"},t._l(t.data.children,(function(e){return r("TreeNode",{key:e._id,attrs:{data:e,store:t.store,level:t.childrenLevel},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("default",null,{data:e.data,store:e.store,vm:e.vm})]}},{key:"node-inner-back",fn:function(e){return t.store.customInnerBack?[t._t("node-inner-back",null,{styleObj:e.styleObj,data:e.data,store:e.store,vm:e.vm})]:void 0}}],null,!0)})})),1):t._e()])],2)};G._withStripped=!0;var V=F({render:G,staticRenderFns:[]},void 0,H,void 0,!1,void 0,!1,void 0,void 0,void 0),Y={props:{data:{},idLength:{type:Number,default:5},indent:{type:Number,default:16},activatedClass:{default:"active"},openedClass:{default:"open"},space:{type:Number,default:10},childrenTransitionName:{},customInnerBack:{}},components:{TreeNode:V},data:function(){return{store:this,rootData:null}},watch:{data:{immediate:!0,handler:function(t,e){var r=this;t!==e&&(this.rootData=this.rootData||{isRoot:!0,_id:"tree_".concat(this._uid,"_node_root"),children:[]},I(t,(function(t,e,n){r.compeleteNode(t,n)})),this.rootData.children=t)}}},methods:{compeleteNode:function(t,e){var r={open:!0,children:[],active:!1,style:{},class:"",innerStyle:{},innerClass:"",innerBackStyle:{},innerBackClass:{}};for(var n in r)t.hasOwnProperty(n)||this.$set(t,n,r[n]);this.$set(t,"parent",e||this.rootData),t.hasOwnProperty("_id")||(t._id="tree_".concat(this._uid,"_node_").concat(function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<t;o++)r+=n[_(n.length-1)];return e+r}(this.idLength))),t._treeNodePropertiesCompleted=!0},pure:function(t,e,r){var n=this,o=Object.assign({},t);delete o._id,delete o.parent,delete o.children,delete o.open,delete o.active,delete o.style,delete o.class,delete o.innerStyle,delete o.innerClass,delete o.innerBackStyle,delete o.innerBackClass;for(var i=0,a=Object.keys(o);i<a.length;i++){var l=a[i];"_"===l[0]&&delete o[l]}return e&&t.children&&(o.children=t.children.slice(),o.children.forEach((function(t,r){o.children[r]=n.pure(t,e)}))),r&&r(o,t)||o},getNodeById:function(t){var e;return I(this.rootData.children,(function(r){if(r._id===t)return e=r,!1})),e},getActivated:function(){var t=[];return I(this.rootData.children,(function(e){e.active&&t.push(e)})),t},getOpened:function(){var t=[];return I(this.rootData.children,(function(e){e.open&&t.push(e)})),t},activeNode:function(t,e){this.activated;e&&this.getActivated().forEach((function(t){t.active=!1})),t.active=!0},toggleActive:function(t,e){t.active?t.active=!1:this.activeNode(t,e)},openNode:function(t,e){var r=this;this.opened;e&&this.getOpened().forEach((function(t){t.open=!1,r.$emit("nodeOpenChanged",t)})),t.open=!0,this.$emit("nodeOpenChanged",t)},toggleOpen:function(t,e){t.open?(t.open=!1,this.$emit("nodeOpenChanged",t)):this.openNode(t,e)},getPureData:function(t){return this.pure(this.rootData,!0,t).children},deleteNode:function(t){return N(t.parent.children,t)}}},q=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"he-tree tree"},[r("TreeNode",{attrs:{data:t.rootData,store:t.store},scopedSlots:t._u([{key:"default",fn:function(e){return[t._t("default",null,{data:e.data,store:t.store,vm:e.vm})]}},{key:"node-inner-back",fn:function(e){return t.customInnerBack?[t._t("node-inner-back",null,{styleObj:e.styleObj,data:e.data,store:e.store,vm:e.vm})]:void 0}}],null,!0)})],1)};q._withStripped=!0;var X=F({render:q,staticRenderFns:[]},void 0,Y,void 0,!1,void 0,!1,void 0,void 0,void 0),U={start:["mousedown","touchstart"],move:["mousemove","touchmove"],end:["mouseup","touchend"]},W={isTouch:function(t){return t.type&&t.type.startsWith("touch")},_getStore:function(t){return t._wrapperStore||(t._wrapperStore=[]),t._wrapperStore},on:function(t,e,r){var n,o,i=this._getStore(t),a=this,l=function(t){var n;if(a.isTouch(t))n={x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY};else if(n={x:t.pageX,y:t.pageY},"start"===e&&1!==t.which)return;return r.call(this,t,n)};i.push({handler:r,wrapper:l});for(var s=arguments.length,d=new Array(s>3?s-3:0),c=3;c<s;c++)d[c-3]=arguments[c];(n=k).call.apply(n,[null,t,U[e][0],l].concat(d)),(o=k).call.apply(o,[null,t,U[e][1],l].concat(d))},off:function(t,e,r){for(var n=this._getStore(t),o=arguments.length,i=new Array(o>3?o-3:0),a=3;a<o;a++)i[a-3]=arguments[a];for(var l=n.length-1;l>=0;l--){var s,d,c=n[l],u=c.handler,f=c.wrapper;if(r===u)(s=L).call.apply(s,[null,t,U[e][0],f].concat(i)),(d=L).call.apply(d,[null,t,U[e][1],f].concat(i)),n.splice(l,1)}}};var z=function(){function t(){v(this,t),h(this,"store",{})}return g(t,[{key:"has",value:function(t){return this.store.hasOwnProperty(t)}},{key:"remember",value:function(t,e){return this.has(t)||(this.store[t]={value:e()}),this.store[t].value}},{key:"forget",value:function(t){t?this.has(t)&&delete this.store[t]:this.store={}}}]),t}();
/*!
	 * vue-functions v2.0.6
	 * (c) phphe <phphe@outlook.com> (https://github.com/phphe)
	 * Homepage: undefined
	 * Released under the MIT License.
	 */
function J(t){return""===t||t}function K(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return Q(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Q(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){l=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(l)throw i}}}}function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Z(t,e){for(var r=t;r;)if((r=r.parentNode)===e)return!0}document.elementsFromPoint||(document.elementsFromPoint=function(t,e){var r=[],n=void 0;do{n!==document.elementFromPoint(t,e)?(n=document.elementFromPoint(t,e),r.push(n),n.style.pointerEvents="none"):n=!1}while(n);return r.forEach((function(t){return t.style.pointerEvents="all"})),r});var tt=function(t){},et=function(t){st(t.dplh,t.targetNode)},rt=function(t){ct(t.targetNode.parent)?function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"parent";if(t!==e){var o=e[n][r],i=o.indexOf(e);o[i-1]!==t&&(t[n]===e[n]?(N(o,t),i=o.indexOf(e)):R(t,e[n]),o.splice(i,0,t))}}(t.dplh,t.targetNode):st(t.dplh,t.targetNode.parent)},nt=function(t){ct(t.targetNode)?($(t.dplh,t.targetNode),t.targetNode.open||t.store.toggleOpen(t.targetNode)):st(t.dplh,t.targetNode)},ot=function(t){ct(t.targetNode)?(!function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children";if(t===e)throw"can't prepend to self";var n=e[r];n[0]!==t&&(R(t,e),n.splice(0,0,t))}(t.dplh,t.targetNode),t.targetNode.open||t.store.toggleOpen(t.targetNode)):st(t.dplh,t.targetNode)},it=function(t){st(t.dplh,t.targetNode.parent)},at=function(t){ct(t.targetPrev)?($(t.dplh,t.targetPrev),t.targetPrev.open||t.store.toggleOpen(t.targetPrev)):st(t.dplh,t.targetPrev)},lt=function(t){ct(t.currentTree.rootData)&&$(t.dplh,t.currentTree.rootData)};function st(t,e,r){if(!e)return!1;var n=function(t,e){var r=t;for(;r;){if(e(r))return r;r=r.parent}}(e,(function(t){return t.parent&&ct(t.parent)}));return!!n&&(B(t,n),!0)}function dt(t){return!t||!1!==t.draggable}function ct(t){var e;yt.hasOwnProperty(t._id)||(e=t.hasOwnProperty("droppable")?t.droppable:!t.parent||ct(t.parent),yt[t._id]=e);return yt[t._id]}function ut(t,e,r,n){var o=e.length;if(n)for(var i=o-1;i>=0;i--){var a=e[i];if(a!==t.node&&r(a,i))return a}else for(var l=0;l<o;l++){var s=e[l];if(s!==t.node&&r(s,l))return s}}for(var ft,pt={"targetNode existed":function(t){return t.targetNode},"targetNode is placeholder":function(t){return t.targetNode.isDragPlaceHolder},"targetNode at top":function(t){return t.targetAtTop},"targetNode at bottom":function(t){return t.targetAtBottom},"targetNode is the second child of root":function(t){return t.currentTreeRootSecondChildExcludingDragging===t.targetNode},"currentTree existed":function(t){return t.currentTree},"currentTree empty":function(t){return!ut(t,t.currentTree.rootData.children,(function(t){return t}))},"placeholder existed":function(t){return t.dplhEl},"placeholder in currentTree":function(t){return t.dplhElInCurrentTree},"placeholder at top":function(t){return t.dplhAtTop},"targetNode is open":function(t){return t.targetNode.open},"targetNode has children excluding placeholder":function(t){return ut(t,t.targetNode.children,(function(e){return e!==t.dplh}))},"targetNode is 1st child":function(t){return ut(t,t.targetNode.parent.children,(function(t){return t}))===t.targetNode},"targetNode is last child":function(t){return ut(t,t.targetNode.parent.children,(function(t){return t}),!0)===t.targetNode},"on targetNode middle":function(t){return t.offset.y<=t.tiMiddleY},"at left":function(t){return t.offset.x<t.tiOffset.x},"at indent right":function(t){return t.offset.x>t.tiOffset.x+t.currentTree.indent}},ht=function(){var t=vt[gt],e=pt[t];pt[t]=function(){return Boolean(e.apply(void 0,arguments))}},gt=0,vt=Object.keys(pt);gt<vt.length;gt++)ht();var yt={};function mt(t){var e=this.store.trees,r=t.store,n={event:t.event,el:r.el,vm:this,node:this.data,store:this.store,dplh:this.store.dplh,draggableHelperData:{opt:t.options,store:r}};!function(t,e,r){var n=function(n){Object.defineProperty(t,n,{get:function(){var t=this;return e.remember(n,(function(){return r[n].call(t)}))}})};for(var o in r)n(o)}(n,new z,{nodeInnerEl:function(){return this.el.querySelector(".tree-node-inner")},offset:function(){return w(this.nodeInnerEl)},offset2:function(){return{x:this.offset.x+this.nodeInnerEl.offsetWidth,y:this.offset.y+this.nodeInnerEl.offsetHeight}},offsetToViewPort:function(){var t=this.nodeInnerEl.getBoundingClientRect();return t.x=t.left,t.y=t.top,t},currentTree:function(){var t=function(t,e,r){var n,o,i,a=[],l=K(document.elementsFromPoint(t,e));try{for(l.s();!(i=l.n()).done;){var s=i.value;if(o){if(P(s,"tree")){n=s;break}a.push(s)}else P(s,"tree-node")&&(o=s)}}catch(t){l.e(t)}finally{l.f()}if(n){var d=!1;if(!Z(o,n)){var c,u=K(a);try{for(u.s();!(c=u.n()).done;){if(!Z(c.value,n)){d=!0;break}}}catch(t){u.e(t)}finally{u.f()}}if(!d)return r.find((function(t){return t.$el===n}))}}(this.offsetToViewPort.x,this.offsetToViewPort.y,e);if(t){var r=this.store;if(null==ft&&(ft=r),ft!==t){if(!J(r.crossTree)||!J(t.crossTree))return;ft=t}if(!J(t.droppable))return;return t}},currentTreeRootEl:function(){return document.getElementById(this.currentTree.rootData._id)},currentTreeRootOf4:function(){return xt(this.currentTreeRootEl,this.currentTree.space)},currentTreeRootSecondChildExcludingDragging:function(){var t=this;return this.currentTree.rootData.children.slice(0,3).filter((function(e){return e!==t.node}))[1]},dplhEl:function(){return document.getElementById(this.dplh._id)},dplhElInCurrentTree:function(){return Boolean(this.currentTree.$el.querySelector("#".concat(this.dplh._id)))},dplhOf4:function(){return xt(this.dplhEl,this.currentTree.space)},dplhAtTop:function(){return Math.abs(this.dplhOf4.y-this.currentTreeRootOf4.y)<5},targetAtTop:function(){return Math.abs(this.tiOf4.y-this.currentTreeRootOf4.y)<5},targetAtBottom:function(){return Math.abs(this.tiOf4.y2-this.currentTreeRootOf4.y2)<5},targetNode:function(){var t=this.currentTree;if(!t)throw"no currentTree";for(var e=this.offset,r=(e.x,e.y),n=t.rootData;;){var o=n.children;if(!o)break;if(this.node.parent===n&&(o=o.slice()).splice(o.indexOf(this.node),1),0===o.length)break;var i=M(o,(function(e){var n=document.getElementById(e._id),o=w(n).y;return o+n.offsetHeight+t.space<r?-1:o<=r?0:1}),null,null,!0);if(!(n=i.hit?i.value:i.bigger?o[i.index-1]:i.value)){n=o[0];break}if(!n)break;var a=xt(document.getElementById(n._id).querySelector(".tree-node-inner"),t.space);if(a.y<=r&&r<=a.y2)break}return n},targetNodeEl:function(){return document.getElementById(this.targetNode._id)},tiInnerEl:function(){return this.targetNodeEl.querySelector(".tree-node-inner")},tiOffset:function(){return w(this.tiInnerEl)},tiOf4:function(){return xt(this.tiInnerEl,this.currentTree.space)},tiMiddleY:function(){return this.tiOffset.y+this.tiInnerEl.offsetHeight/2},targetPrevEl:function(){var t=this.targetNodeEl.previousSibling;return P(t,"dragging")&&(t=t.previousSibling),t},targetPrev:function(){var t=this.targetPrevEl.getAttribute("id");return this.currentTree.getNodeById(t)}});var o={},i=function(t){if(!o.hasOwnProperty(t)){var e;try{e=pt[t](n)}catch(r){e=r;try{process.env.DEVELOPE_SELF&&console.warn("failed to execute rule '".concat(t,"'"),r)}catch(t){}}o[t]=e}return o[t]};!0===i("currentTree existed")?!1===i("targetNode is placeholder")?!0===i("targetNode is the second child of root")?!1===i("targetNode has children excluding placeholder")?!0===i("on targetNode middle")?rt(n):!1===i("on targetNode middle")&&(!0===i("at indent right")?nt(n):!1===i("at indent right")&&et(n)):!0===i("targetNode has children excluding placeholder")&&ot(n):!1===i("targetNode is the second child of root")&&(!1===i("currentTree empty")?!0===i("targetNode at top")?!0===i("placeholder in currentTree")?!1===i("targetNode has children excluding placeholder")?!1===i("on targetNode middle")?!1===i("at indent right")?et(n):!0===i("at indent right")&&nt(n):!0===i("on targetNode middle")&&rt(n):!0===i("targetNode has children excluding placeholder")&&(!1===i("on targetNode middle")?ot(n):!0===i("on targetNode middle")&&rt(n)):!1===i("placeholder in currentTree")&&rt(n):!1===i("targetNode at top")&&(!1===i("targetNode at bottom")?!0===i("placeholder at top")?ot(n):!1===i("placeholder at top")&&(!0===i("targetNode has children excluding placeholder")?ot(n):!1===i("targetNode has children excluding placeholder")&&(!1===i("targetNode is 1st child")?!1===i("targetNode is last child")?(!0===i("on targetNode middle")||!1===i("on targetNode middle"))&&(!0===i("at indent right")?nt(n):!1===i("at indent right")&&et(n)):!0===i("targetNode is last child")&&(!0===i("at indent right")?nt(n):!1===i("at indent right")&&et(n)):!0===i("targetNode is 1st child")&&(!0===i("targetNode is last child")?nt(n):!1===i("targetNode is last child")&&(!1===i("on targetNode middle")||!0===i("on targetNode middle"))&&(!1===i("at indent right")?et(n):!0===i("at indent right")&&nt(n))))):!0===i("targetNode at bottom")&&(!0===i("placeholder in currentTree")?!1===i("on targetNode middle")?!0===i("at indent right")?nt(n):!1===i("at indent right")&&et(n):!0===i("on targetNode middle")&&nt(n):!1===i("placeholder in currentTree")&&nt(n))):!0===i("currentTree empty")&&lt(n)):!0===i("targetNode is placeholder")&&(!1===i("targetNode at bottom")?!1===i("targetNode is the second child of root")?!0===i("targetNode is 1st child")?!1===i("targetNode is last child")?tt(n):!0===i("targetNode is last child")&&(!1===i("on targetNode middle")||!0===i("on targetNode middle"))&&(!0===i("at left")?it(n):!1===i("at left")&&tt(n)):!1===i("targetNode is 1st child")&&(!0===i("targetNode is last child")?(!0===i("on targetNode middle")||!1===i("on targetNode middle"))&&(!0===i("at left")?it(n):!1===i("at left")&&(!0===i("at indent right")?at(n):!1===i("at indent right")&&tt(n))):!1===i("targetNode is last child")&&(!0===i("on targetNode middle")||!1===i("on targetNode middle"))&&(!0===i("at left")?tt(n):!1===i("at left")&&(!0===i("at indent right")?at(n):!1===i("at indent right")&&tt(n)))):!0===i("targetNode is the second child of root")&&(!0===i("on targetNode middle")||!1===i("on targetNode middle"))&&(!0===i("at indent right")?at(n):!1===i("at indent right")&&tt(n)):!0===i("targetNode at bottom")&&(!0===i("targetNode is 1st child")?!1===i("on targetNode middle")?!0===i("at left")?it(n):!1===i("at left")&&tt(n):!0===i("on targetNode middle")&&(!1===i("at left")?tt(n):!0===i("at left")&&it(n)):!1===i("targetNode is 1st child")&&(!1===i("on targetNode middle")||!0===i("on targetNode middle"))&&(!0===i("at left")?it(n):!1===i("at left")&&(!0===i("at indent right")?at(n):!1===i("at indent right")&&tt(n))))):!1===i("currentTree existed")&&tt(n)}function xt(t,e){var r=w(t);return r.x2=r.x+t.offsetWidth,r.y2=r.y+t.offsetHeight+e,r}mt.dragStart=function(){},mt.dragEnd=function(){ft=null,yt={}};var bt=F({},void 0,{extends:V,name:"TreeNode",mounted:function(){var t=this;if(this.store.isNodeDraggable=dt,this.store.isNodeDroppable=ct,!this.isRoot&&!this.data.isDragPlaceHolder){var e=this.store.dplh;this.$watch("store.draggable",(function(r){if(J(r)){var n=t.store.getTriggerEl?t.store.getTriggerEl(t):t.$el.querySelector(".tree-node-inner");t._draggableDestroy=
/*!
	 * draggable-helper v1.0.20
	 * (c) 2018-present phphe <phphe@outlook.com> (https://github.com/phphe)
	 * Released under the MIT License.
	 */
function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null==e.minTranslate&&(e.minTranslate=10);var r={movedCount:0},n=function(){W.off(t,"end",t._draggbleEventHandler),L(t,"selectstart",d),delete t._draggbleEventHandler};return t._draggbleEventHandler&&n(),t._draggbleEventHandler=o,W.on(t,"start",t._draggbleEventHandler),k(t,"selectstart",d),n;function o(t,e){r.mouse={x:e.x,y:e.y},r.initialMouse=Object.assign({},r.mouse),W.on(document,"move",a,{passive:!1}),W.on(window,"end",l)}function i(t){var n=s(),o=n.el,i=n.position;if(r.el=o,r.initialPosition=Object.assign({},i),!1===(e.drag&&e.drag(t,e,r)))return!1;var a=j(o),l=Object.assign({width:"".concat(a.width,"px"),height:"".concat(a.height,"px"),zIndex:9999,opacity:.6,position:"absolute",left:i.x+"px",top:i.y+"px"},e.style||e.getStyle&&e.getStyle(e)||{});for(var d in T(o,"style"),l)o.style[d]=l[d];T(o,"class"),C(o,e.draggingClass)}function a(t,n){r.mouse={x:n.x,y:n.y};var o=r.move={x:r.mouse.x-r.initialMouse.x,y:r.mouse.y-r.initialMouse.y};if(0===r.movedCount&&e.minTranslate){var a=Math.pow(r.move.x,2),l=Math.pow(r.move.y,2);if(Math.pow(a+l,.5)<e.minTranslate)return}var s=!0;if(0===r.movedCount&&!1===i(t)&&(s=!1),t.preventDefault(),s&&e.moving&&!1===e.moving(t,e,r)&&(s=!1),s){if(!r||!r.el)return;Object.assign(r.el.style,{left:r.initialPosition.x+o.x+"px",top:r.initialPosition.y+o.y+"px"}),r.movedCount++}}function l(t){if(W.off(document,"move",a,{passive:!1}),W.off(window,"end",l),r.movedCount>0){r.movedCount=0;var n=r.el;e.clone?n.parentElement.removeChild(n):(S(n,"style"),S(n,"class")),e.drop&&e.drop(t,e,r)}r={movedCount:0}}function s(){var n=e.getEl?e.getEl(t,e):t,o=n;return e.clone&&(r.triggerEl=n,o=n.cloneNode(!0),n.parentElement.appendChild(o)),{position:E(o),el:o}}function d(t){t.preventDefault()}}(n,{preventSelect:J(t.store.preventSelect),getEl:function(){return t.$el},minTranslate:10,drag:function(r,n,o){mt.dragStart();var i={event:r,options:n,store:o};if(t.store.ondragstart&&!1===t.store.ondragstart(t.data,i))return!1;if(!dt(t.data))return!1;t.store.$emit("drag",t.data);var a=t.data.parent.children;t.startPosition={siblings:a,index:a.indexOf(t.data)},e.innerStyle.height=o.el.offsetHeight+"px",B(e,t.data),t.data.class+=" dragging"},moving:function(e,r,n){if(0!==n.movedCount){var o={event:e,options:r,store:n};return mt.call(t,o)}},drop:function(r,n,o){mt.dragEnd();var i={event:r,options:n,store:o};if(t.store.ondragend&&!1===t.store.ondragend(t.data,i))N(e.parent.children,e);else{var a=e._vm.store,l=a!==t.store?t.store:null;B(t.data,e),N(e.parent.children,e),t.data.class=t.data.class.replace(/(^| )dragging( |$)/g," "),a.$emit("drop",t.data,a,l),l&&l.$emit("drop",t.data,a,l);var s=t.data.parent.children;s===t.startPosition.siblings&&s.indexOf(t.data)===t.startPosition.index||(t.store.$emit("change",t.data,a,l),l&&l.$emit("change",t.data,a,l)),t.startPosition=null}}})}else t._draggableDestroy&&(t._draggableDestroy(),t._draggableDestroy=null)}),{immediate:!0})}}},void 0,void 0,void 0,!1,void 0,void 0,void 0),_t=[],Nt={_id:"draggable_tree_drag_placeHolder",level:null,droppable:!1,isDragPlaceHolder:!0,class:"draggable-placeholder",style:{},innerStyle:{},innerClass:"draggable-placeholder-inner",innerBackStyle:{},innerBackClass:"draggable-placeholder-inner-back"},wt=F({},void 0,{extends:X,props:{getTriggerEl:{type:Function},draggable:{},droppable:{default:!0},crossTree:{},ondragstart:{type:Function},ondragend:{type:Function},preventSelect:{default:!0}},components:{TreeNode:bt},data:function(){return{dplh:Nt,trees:_t}},created:function(){_t.push(this)},mounted:function(){},beforeDestroy:function(){N(_t,this)}},void 0,void 0,void 0,!1,void 0,void 0,void 0);t.DraggableTree=wt,t.DraggableTreeNode=bt,t.Tree=X,t.TreeNode=V,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=vue-draggable-nested-tree.min.js.map
